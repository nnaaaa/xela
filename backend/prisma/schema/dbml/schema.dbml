//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table BankManager {
  id String [pk]
  name String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  apiKey String [not null]
  userId Int [not null]
  banks BankAccount [not null]
  user User [not null]
}

Table BankAccount {
  id String [pk]
  name String [not null]
  bankManagerId String [not null]
  accountName String [not null]
  accountNumber String [not null]
  balance Float [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  fullName String [not null]
  bankManager BankManager [not null]
  transactions BankTransaction [not null]
}

Table BankTransaction {
  id String [pk]
  bankId String [not null]
  amount Float [not null]
  description String [not null]
  createdAt DateTime [default: `now()`, not null]
  spentAmount Float [not null, default: 0]
  bank BankAccount [not null]
  expense Expense [not null]
}

Table CryptoPortfolio {
  userId Int [not null]
  exchanges String [not null, default: 'binance']
  tradingType TradingType [not null]
  apiKey String [not null]
  secretKey String [not null]
  updateTime DateTime
  id String [pk]
  balances AssetBalance [not null]
  user User [not null]
  historicalBalances HistoricalCryptoBalance [not null]
  investmentCategoryName String
}

Table AssetBalance {
  id String [pk]
  assetInfoId String [not null]
  balance Float [not null]
  locked Float [not null]
  cryptoPortfolioId String [not null]
  assetInfo AssetInfo [not null]
  cryptoPortfolio CryptoPortfolio [not null]
}

Table AssetInfo {
  id String [pk]
  name String [not null]
  symbol String [not null]
  category String [not null]
  desc String [not null]
  logo String [not null]
  assetBalances AssetBalance [not null]
  assetPrices AssetPrice [not null]
}

Table AssetPrice {
  assetInfoId String [not null]
  interval String [not null]
  open_time DateTime [not null]
  close_time DateTime [not null]
  openPrice Float [not null]
  closePrice Float [not null]
  highPrice Float [not null]
  lowPrice Float [not null]
  volume Float [not null]
  assetInfo AssetInfo [not null]

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table HistoricalCryptoBalance {
  time DateTime [not null]
  estimatedBalance Float [not null]
  changePercent Float [not null]
  changeBalance Float [not null]
  cryptoPortfolioId String [not null]
  cryptoPortfolio CryptoPortfolio [not null]

  indexes {
    (cryptoPortfolioId, time) [unique]
  }
}

Table ExpenseCategory {
  id String [pk]
  userId Int [not null]
  name String [not null]
  description String
  color String [not null]
  expenses Expense [not null]
  user User [not null]
  monthlyTargets MonthlyTarget [not null]
}

Table MonthlyTarget {
  id String [pk]
  categoryId String [not null]
  month Int [not null]
  year Int [not null]
  target Float [not null]
  category ExpenseCategory [not null]
}

Table Expense {
  id String [pk]
  userId Int [not null]
  categoryId String [not null]
  name String [not null]
  description String
  amount Float [not null]
  bankTransactionId String [not null]
  createdAt DateTime [default: `now()`, not null]
  bankTransaction BankTransaction [not null]
  category ExpenseCategory [not null]
  user User [not null]
}

Table User {
  id Int [pk, increment]
  email String [unique, not null]
  name String
  password String [not null]
  otp String
  otpPurpose OtpPurpose
  bankManager BankManager [not null]
  cryptoPortfolios CryptoPortfolio [not null]
  expenses Expense [not null]
  expenseCategories ExpenseCategory [not null]
}

Table asset_price_5m {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table asset_price_1h {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table asset_price_1d {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table asset_price_1M {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table historical_crypto_balance_1h {
  time DateTime [not null]
  estimatedBalance Float
  changeBalance Float
  changePercent Float
  cryptoPortfolioId String [not null]

  indexes {
    (cryptoPortfolioId, time) [unique]
  }
}

Table historical_crypto_balance_1d {
  time DateTime [not null]
  estimatedBalance Float
  changeBalance Float
  changePercent Float
  cryptoPortfolioId String [not null]

  indexes {
    (cryptoPortfolioId, time) [unique]
  }
}

Enum TradingType {
  FUTURES
  SPOT
}

Enum OtpPurpose {
  VERIFY_ACCOUNT
  RESET_PASSWORD
}

Ref: BankManager.userId > User.id

Ref: BankAccount.bankManagerId > BankManager.id

Ref: BankTransaction.bankId > BankAccount.id

Ref: CryptoPortfolio.userId > User.id

Ref: AssetBalance.assetInfoId > AssetInfo.id

Ref: AssetBalance.cryptoPortfolioId > CryptoPortfolio.id

Ref: AssetPrice.assetInfoId > AssetInfo.id

Ref: HistoricalCryptoBalance.cryptoPortfolioId > CryptoPortfolio.id

Ref: ExpenseCategory.userId > User.id

Ref: MonthlyTarget.categoryId > ExpenseCategory.id

Ref: Expense.bankTransactionId > BankTransaction.id

Ref: Expense.categoryId > ExpenseCategory.id

Ref: Expense.userId > User.id