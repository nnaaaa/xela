//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table UserCryptoProfile {
  profileId String [pk]
  userId Int [not null]
  exchanges String [not null, default: 'binance']
  tradingType TradingType [not null]
  apiKey String [not null]
  secretKey String [not null]
  updateTime DateTime
  balances AssetBalance [not null]
  historicalBalances HistoricalCryptoBalance [not null]
  user User [not null]
}

Table AssetBalance {
  id String [pk]
  cryptoProfileId String [not null]
  assetInfoId String [not null]
  balance Float [not null]
  locked Float [not null]
  assetInfo AssetInfo [not null]
  cryptoProfile UserCryptoProfile [not null]
}

Table AssetInfo {
  id String [pk]
  name String [not null]
  symbol String [not null]
  category String [not null]
  desc String [not null]
  logo String [not null]
  assetBalances AssetBalance [not null]
  assetPrices AssetPrice [not null]
}

Table AssetPrice {
  assetInfoId String [not null]
  interval String [not null]
  open_time DateTime [not null]
  close_time DateTime [not null]
  openPrice Float [not null]
  closePrice Float [not null]
  highPrice Float [not null]
  lowPrice Float [not null]
  volume Float [not null]
  assetInfo AssetInfo [not null]

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table HistoricalCryptoBalance {
  cryptoProfileId String [not null]
  time DateTime [not null]
  estimatedBalance Float [not null]
  changePercent Float [not null]
  changeBalance Float [not null]
  cryptoProfile UserCryptoProfile [not null]

  indexes {
    (cryptoProfileId, time) [unique]
  }
}

Table User {
  id Int [pk, increment]
  email String [unique, not null]
  name String
  password String [not null]
  otp String
  otpPurpose OtpPurpose
  cryptoProfiles UserCryptoProfile [not null]
}

Table asset_price_5m {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table asset_price_1h {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table asset_price_1d {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Table asset_price_1M {
  open_time DateTime [not null]
  assetInfoId String [not null]
  openPrice Float
  closePrice Float
  highPrice Float
  lowPrice Float
  volume Float

  indexes {
    (assetInfoId, open_time) [unique]
  }
}

Enum TradingType {
  FUTURES
  SPOT
}

Enum OtpPurpose {
  VERIFY_ACCOUNT
  RESET_PASSWORD
}

Ref: UserCryptoProfile.userId > User.id

Ref: AssetBalance.assetInfoId > AssetInfo.id

Ref: AssetBalance.cryptoProfileId > UserCryptoProfile.profileId

Ref: AssetPrice.assetInfoId > AssetInfo.id

Ref: HistoricalCryptoBalance.cryptoProfileId > UserCryptoProfile.profileId