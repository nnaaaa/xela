# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type AssetPrice {
  assetInfoId: String!
  interval: String!
  open_time: DateTime!
  close_time: DateTime!
  openPrice: Float!
  closePrice: Float!
  highPrice: Float!
  lowPrice: Float!
  volume: Float!
  assetInfo: AssetInfo!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type AssetInfo {
  id: String!
  name: String!
  symbol: String!
  category: String!
  desc: String!
  logo: String!
  assetBalances: [AssetBalance!]
  assetPrices: [AssetPrice!]
}

type AssetBalance {
  id: String!
  assetInfoId: String!
  balance: Float!
  locked: Float!
  cryptoPortfolioId: String!
  assetInfo: AssetInfoOutput!
  cryptoPortfolio: CryptoPortfolio!
}

type HistoricalCryptoBalance {
  time: DateTime!
  estimatedBalance: Float!
  changePercent: Float!
  changeBalance: Float!
  cryptoPortfolioId: String!
  cryptoPortfolio: CryptoPortfolio!
}

type CryptoPortfolio {
  id: String!
  userId: Int!
  exchanges: String!
  tradingType: TradingType!
  apiKey: String!
  secretKey: String!
  updateTime: DateTime
  balances: [AssetBalance!]!
  user: User!
  historicalBalances: [HistoricalCryptoBalance!]!
}

enum TradingType {
  FUTURES
  SPOT
}

type ExpenseCategory {
  id: String!
  userId: Int!
  name: String!
  color: String!
  description: String
  expenses: [Expense!]
  user: User!
  countExpenses: Int!
  totalAmount(startDate: DateTime, endDate: DateTime): Int!
}

type Expense {
  id: String!
  userId: Int!
  categoryId: String!
  bankTransactionId: String!
  name: String!
  description: String
  amount: Float!
  createdAt: DateTime!
  category: ExpenseCategory!
  user: User!
  bankTransaction: BankTransaction!
  transaction: BankTransaction!
}

type BankTransaction {
  id: String!
  bankId: String!
  amount: Float!
  description: String!
  spentAmount: Float!
  createdAt: DateTime!
  expense: [Expense!]
  bank: BankAccount!
}

type BankAccount {
  id: String!
  name: String!
  fullName: String!
  bankManagerId: String!
  accountName: String!
  accountNumber: String!
  balance: Float!
  createdAt: DateTime!
  updatedAt: DateTime!
  bankManager: BankManager!
  transactions: [BankTransaction!]!
}

type BankManager {
  id: String!
  userId: Int!
  name: String!
  apiKey: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  user: User!
  banks: [BankAccount!]!
}

type User {
  id: Int!
  email: String!
  name: String
  password: String!
  otp: String
  otpPurpose: OtpPurpose
  cryptoPortfolios: [CryptoPortfolio!]
  bankManager: [BankManager!]
  expenseCategories: [ExpenseCategory!]
  expenses: [Expense!]
  cryptoProfiles: CryptoPortfolio!
}

enum OtpPurpose {
  VERIFY_ACCOUNT
  RESET_PASSWORD
}

type LoginResDto {
  accessToken: String!
  refreshToken: String!
}

type SignupResDto {
  accessToken: String!
  refreshToken: String!
}

type CreateCryptoRes {
  userId: Float!
}

type AssetInfoOutput {
  id: String
  name: String
  symbol: String
  category: String
  desc: String
  logo: String
  assetBalances: [AssetBalance!]
  assetPrices: [AssetPrice!]
  lastPrice: Float!
}

type Query {
  getMe: User!
  getCryptoPortfolios(data: GetCryptoPortfolioInput!): [CryptoPortfolio!]!
  getAssetInfo(data: GetAssetInfoInput!): AssetInfo!
  getAssetPrices(data: GetAssetPriceInput!, pagination: PaginationInput!): [AssetPrice!]!
  getBankManagers(userId: Int!): [BankManager!]!
  getBankTransactions(userId: Float!): [BankTransaction!]!
  getExpenses(userId: Int!, startDate: DateTime, endDate: DateTime): [Expense!]!
  getExpenseCategories(userId: Int!): [ExpenseCategory!]!
}

input GetCryptoPortfolioInput {
  userId: Int!
}

input GetAssetInfoInput {
  id: String!
}

input GetAssetPriceInput {
  assetInfoId: String!
  timeFrame: String!
}

input PaginationInput {
  take: Int!
  after: String
  before: String
}

type Mutation {
  createCryptoPortfolio(data: CreateCryptoPortfolioInput!): CreateCryptoRes!
  login(data: LoginReqDto!): LoginResDto!
  signup(data: CreateUserInput!): SignupResDto!
  verifyAccount(data: VerifyDto!): LoginResDto!
  createBank(data: CreateBankManagerInput!): BankManager!
  createExpense(data: CreateExpenseInput!): Expense!
  updateExpense(id: String!, data: UpdateExpenseInput!): Expense!
  removeExpense(id: String!): Expense!
  removeExpenses(ids: [String!]!): Int!
  createExpenseCategory(data: CreateExpenseCategoryInput!): ExpenseCategory!
  updateExpenseCategory(id: String!, data: UpdateExpenseCategoryInput!): ExpenseCategory!
  removeExpenseCategory(id: String!): ExpenseCategory!
}

input CreateCryptoPortfolioInput {
  userId: Int!
  apiKey: String!
  secretKey: String!
}

input LoginReqDto {
  email: String!
  password: String!
}

input CreateUserInput {
  email: String!
  name: String
  password: String!
  otp: String
  otpPurpose: OtpPurpose
}

input VerifyDto {
  otp: String!
  otpPurpose: OtpPurpose!
}

input CreateBankManagerInput {
  name: String!
  userId: Int!
  apiKey: String!
}

input CreateExpenseInput {
  userId: Int!
  categoryId: String!
  bankTransactionId: String!
  name: String!
  description: String
  amount: Float!
}

input UpdateExpenseInput {
  categoryId: String
  bankTransactionId: String
  name: String
  description: String
  amount: Float
}

input CreateExpenseCategoryInput {
  userId: Int!
  name: String!
  color: String!
  description: String
}

input UpdateExpenseCategoryInput {
  name: String
  color: String
  description: String
}

type Subscription {
  portfolioCreated(data: GetCryptoPortfolioInput!): CryptoPortfolio!
  newAssetPrice1m(data: GetAssetPriceInput!): AssetPrice!
  newAssetPrice5m(data: GetAssetPriceInput!): AssetPrice!
}